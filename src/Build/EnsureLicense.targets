<!--
 * EnsureLicense.targets
 *
 *   Created: 2023-10-08-10:19:13
 *   Modified: 2023-10-12-08:23:32
 *
 *   Author: David G. Moore, Jr. <david@dgmjr.io>
 *
 *   Copyright Â© 2022 - 2023 David G. Moore, Jr., All Rights Reserved
 *      License: MIT (https://opensource.org/licenses/MIT)
-->

<Project InitialTargets="EnsureLicenseFileExists">
  <UsingTask TaskName="Dgmjr.Sdk.Tasks.EnsureLicenseFileExists" AssemblyFile="$(DgmjrSdkDll)" />

  <Target Name="EnsureLicenseFileExists" BeforeTargets="Pack;GetPackageContents">
    <EnsureLicenseFileExists MSBuildProjectFullPath="$(MSBuildProjectFullPath)" />
    <!-- <GetFileHash Files="$(MSBuildThisFileDirectory)../LICENSE.md">
      <Output TaskParameter="Hash" PropertyName="SdkLicenseFileHash" />
    </GetFileHash>
    <GetFileHash Files="$(MSBuildProjectDirectory)/LICENSE.md" Condition="Exists('$(MSBuildProjectDirectory)/LICENSE.md')">
      <Output TaskParameter="Hash" PropertyName="ProjectLicenseFileHash" />
    </GetFileHash>
    <Warning Condition="'$(SdkLicenseFileHash)' != '$(ProjectLicenseFileHash)'" Text="The LICENSE.md file in the project root (hash $(ProjectLicenseFileHash)) does not match the SDK license file (hash $(SdkLicenseFileHash)); updating it to match." />
    <Copy SourceFiles="$(MSBuildThisFileDirectory)../LICENSE.md" DestinationFolder="$(MSBuildProjectDirectory)" Condition="'$(SdkLicenseFileHash)' != '$(ProjectLicenseFileHash)'" />
    <PropertyGroup>
      <_PackageLicenseFile>LICENSE.md</_PackageLicenseFile>
    </PropertyGroup>
    <ItemGroup>
      <EmbeddedResource Include="$(_PackageLicenseFile)" />
      <PackageFile Include="$(_PackageLicenseFile)" Pack="true" PackagePath="LICENSE.md" />
    </ItemGroup> -->
  </Target>
</Project>
