<!--
 Authors-Owners.targets
 
   Created: 2022-10-21-11:40:42
   Modified: 2022-10-29-02:46:38
 
   Author: David G. Moore, Jr. <david@dgmjr.io>
   
   Copyright Â© 2022-2023 David G. Moore, Jr., All Rights Reserved
      License: MIT (https://opensource.org/licenses/MIT)
-->

<Project>

  <Target Name="SetPackageOwnersAndAuthors" BeforeTargets="GetPackageMetadata;GenerateMSBuildEditorConfigFileShouldRun">
    <ItemGroup>
      <DistinctAuthorsWithEmail Include="@(Author->HasMetadata('Email')->Distinct())" />
      <DistinctOwnersWithEmail Include="@(Owner->HasMetadata('Email')->Distinct())" />
      <DistinctAuthorsNoEmail Remove="@(DistinctAuthorsWithEmail)" />
      <DistinctOwnersNoEmail Remove="@(DistinctOwnersWithEmail)" />
      <DistinctAuthorsFinal Include="@(DistinctAuthorsWithEmail->'%(Identity) &lt;%(Email)&gt;');@(DistinctAuthorsNoEmail)" />
      <DistinctOwnersFinal Include="@(DistinctOwnersWithEmail->'%(Identity) &lt;%(Email)&gt;');@(DistinctOwnersNoEmail)" />
    </ItemGroup>
    <PropertyGroup>
      <Authors>@(DistinctAuthorsFinal, @(DistinctAuthorsFinal->Count() == 2 ? ' %26 ' : ', '))</Authors>
      <Owners>@(DistinctOwnersFinal, @(DistinctOwnersFinal->Count() == 2 ? ' %26 ' : ', '))</Owners>
    </PropertyGroup>
    <Message Text="DistinctOwnersFinal: @(DistinctOwnersFinal)" />
    <Message Text="DistinctAuthorsFinal: @(DistinctAuthorsFinal)" />
  </Target>

</Project>
